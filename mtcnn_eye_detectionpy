# coding: utf-8import numpy as npimport cv2import matplotlib.pyplot as plotimport timeimport mathfrom mtcnn.mtcnn import MTCNNcap = cv2.VideoCapture("2.mp4")detector = MTCNN()while(True):    ret, image = cap.read()    result = detector.detect_faces(image)    print(result)    if len(result) == 0:        continue    else:        bounding_box = result[0]['box']        keypoints = result[0]['keypoints']        #draw = image.copy()        #ew = (keypoints['right_eye'][0] - keypoints['left_eye'][0]) // 2    cv2.rectangle(image ,(bounding_box[0], bounding_box[1]),                          (bounding_box[0]+bounding_box[2], bounding_box[1] + bounding_box[3]),                          (0,155,255),                          2)    face = image[bounding_box[1]:bounding_box[1] + bounding_box[3],bounding_box[0]:bounding_box[0]+bounding_box[2]]    ew = (keypoints['right_eye'][0] - keypoints['left_eye'][0]) // 3    cv2.rectangle(image, (keypoints['left_eye'][0] - ew, keypoints['left_eye'][1] - ew),                      (keypoints['left_eye'][0] + ew, keypoints['left_eye'][1] + ew), (0, 255, 0), 2)    cv2.rectangle(image, (keypoints['right_eye'][0] - ew, keypoints['right_eye'][1] - ew),                      (keypoints['right_eye'][0] + ew, keypoints['right_eye'][1] + ew), (0, 255, 0), 2)    roi = image[keypoints['left_eye'][1] - ew: keypoints['left_eye'][1] + ew,keypoints['left_eye'][0] - ew :keypoints['left_eye'][0] + ew ]    roi2 = image[keypoints['right_eye'][1] - ew: keypoints['right_eye'][1] + ew,keypoints['right_eye'][0] - ew :keypoints['right_eye'][0] + ew ]    cv2.imwrite( r"F:\xiangmu\left_eye.jpg", roi)    cv2.imwrite(r"F:\xiangmu\right_eye.jpg", roi2)    cv2.imwrite(r"F:\xiangmu\face.jpg", face)    #image = cv2.putText(image, "Eye:Close      State:Doze", (50, 50), cv2.FONT_HERSHEY_SIMPLEX, 1.2, (0, 0, 255), 2)    cv2.imshow("detection result", image)    #cv2.imwrite("test.jpg", draw)    if cv2.waitKey(1) & 0xFF == ord('q'):        breakcap.release() #cap.release()与cv2.destroyAllWindows()只能放在while循环体外。cv2.destroyAllWindows()